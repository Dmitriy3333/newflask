{% extends 'base.html' %}

{% block title %}
{{ sanatorium.name or '' }}
{% endblock %}

{% block body %}
<!--{{ user.name }}-->
<div class="sanatorium-container">
    <h1 class="sanatorium-title">{{ sanatorium.name or '' }}</h1>
    <hr>
    <br><br>
    <div class="sanatorium-content">
        <div class="sanatorium-sidebar">
            <div class="sanatorium-content">
<!--         <div class="sanatorium-sidebar">-->
        {% if sanatorium.photos %}
             <div class="photo-main-sanatory">
            <div class="img-wrap">
            {% for photo in sanatorium.photos %}
                <img src="{{ url_for('static', filename=photo.file_path) }}"
                     alt="–§–æ—Ç–æ —Å–∞–Ω–∞—Ç–æ—Ä–∏—è {{ sanatorium.name }}"
                     class="sanatorium-photo">
            {% endfor %}
            </div>
            <button class="btn prev">‚Äπ</button>
            <button class="btn next">‚Ä∫</button>
        {% else %}
            <img src="{{ url_for('static', filename='images/example.jpg') }}"
                 alt="–ó–∞–≥–ª—É—à–∫–∞"
                 class="sanatorium-photo">
        {% endif %}
         </div>
<!--         </div>-->
            </div>
            <div class="sidebar-info">
                <p><b>–°—Ç–æ–∏–º–æ—Å—Ç—å:</b> {{ sanatorium.price_per_night or '' }} ‚ÇΩ / —Å—É—Ç–∫–∏</p>
                <p><b>–†–µ–π—Ç–∏–Ω–≥:</b> {{ sanatorium.average_review_score }}/10</p>
                <p><b>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</b></p>
                <p>‚òéÔ∏è +7 {{ sanatorium.phone or '' }}</p>
                <p>üñ•Ô∏è {{ sanatorium.website or '' }}</p>
                <p>‚úâÔ∏è {{ sanatorium.email or '' }}</p>
            </div>
        </div>

        <div class="sanatorium-main">

            <div class="sanatorium-info-grid">
                <p><b>–°—Ç—Ä–∞–Ω–∞:</b> {{ sanatorium.country or '' }}</p>
                <p><b>–†–µ–≥–∏–æ–Ω:</b> {{ sanatorium.region or '' }}</p>
                <p><b>–ö—É—Ä–æ—Ä—Ç:</b> {{ sanatorium.resort or '' }}</p>
                <p><b>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</b> {{ sanatorium.specialization or '' }}</p>
                <p><b>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</b> {{ sanatorium.equipment or '' }}</p>
                <p><b>–¢–∏–ø—ã –Ω–æ–º–µ—Ä–æ–≤:</b> {{ sanatorium.room_types or '' }}</p>
                <p><b>–£–¥–æ–±—Å—Ç–≤–∞:</b> {{ sanatorium.amenities or '' }}</p>
                <p><b>–ü–∏—Ç–∞–Ω–∏–µ:</b> {{ sanatorium.food_type or '' }}</p>
                <p><b>–î–æ–ø. —É—Å–ª—É–≥–∏:</b> {{ sanatorium.price_per_service or '' }}</p>
                <p><b>–î–æ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π:</b> {{ sanatorium.place_to_attractions }} –∫–º</p>
            </div>

            <div class="features">
                {% if sanatorium.has_pool %}<p>üèä‚Äç‚ôÇÔ∏è –ï—Å—Ç—å –±–∞—Å—Å–µ–π–Ω</p>{% endif %}
                {% if sanatorium.has_spa %}<p>üíÜ –ï—Å—Ç—å —Å–ø–∞</p>{% endif %}
                {% if sanatorium.has_entertainment %}<p>üé≠ –ï—Å—Ç—å —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</p>{% endif %}
            </div>
        </div>
    </div>
    <p class="description" style="white-space: pre-line"><b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> {{ sanatorium.description or '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.' | replace('\n', '<br>')| safe }}</p>
</div>

<script>
    document.querySelectorAll('.photo-main-sanatory').forEach(carousel => {
        const imgWrap = carousel.querySelector('.img-wrap');
        const imgs = carousel.querySelectorAll('.img-wrap img');
        const prevBtn = carousel.querySelector('.prev');
        const nextBtn = carousel.querySelector('.next');
        let idx = 0;

        function showImg() {
            if (idx >= imgs.length) idx = 0;
            if (idx < 0) idx = imgs.length - 1;
            imgWrap.style.transform = `translateX(-${idx * 100}%)`;
        }

        nextBtn.addEventListener('click', (e) => {
            e.stopPropagation();  // Prevents triggering the sanatorium link
            idx++;
            showImg();
        });

        prevBtn.addEventListener('click', (e) => {
            e.stopPropagation();  // Prevents triggering the sanatorium link
            idx--;
            showImg();
        });

        showImg();
    });
</script>

{% endblock %}
